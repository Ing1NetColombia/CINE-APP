<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cartelera</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css" />
    <link rel="stylesheet" href="../css/estilos.css" />
  </head>
  <body>
    <div class="container fondoblanco">
      <div class="card text-center">
        <div class="card-header">
          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a
                class="nav-link text-danger"
                aria-current="true"
                href="../../index.html"
                >Inicio</a
              >
            </li>
            <li class="nav-item" id="nav">
              <a class="nav-link active" href="/assets/Cartelera/Cartelera.html"
                >Cartelera</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link text-danger"
                href="/assets/confiteria/confiteria.html"
                >Confiteria</a
              >
            </li>
            <div class="ms-auto">
              <li class="" id="nav">
                <a
                  class="nav-link text-danger"
                  href="/assets/usuarios/login.html"
                  >Login</a
                >
              </li>
            </div>
          </ul>
        </div>
        <div class="card-body">
          <div
            id="carouselExampleCaptions"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-indicators">
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="0"
                class="active"
                aria-current="true"
                aria-label="Slide 1"
              ></button>
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="1"
                aria-label="Slide 2"
              ></button>
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="2"
                aria-label="Slide 3"
              ></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  src="../imagenes/cine1.jpg"
                  class="d-block w-100 imagencarrusel"
                  alt="..."
                />
                <div class="carousel-caption d-none d-md-block"></div>
              </div>
              <div class="carousel-item">
                <img
                  src="../imagenes/cine2.jpg"
                  class="d-block w-100 imagencarrusel"
                  alt="..."
                />
                <div class="carousel-caption d-none d-md-block"></div>
              </div>
              <div class="carousel-item">
                <img
                  src="../imagenes/cine3.jpg"
                  class="d-block w-100 imagencarrusel"
                  alt="..."
                />
                <div class="carousel-caption d-none d-md-block"></div>
              </div>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </div>

      <div id="carteleras"></div>

      <br />
    </div>
    <div class="container fondoblanco">
      <footer>
        <div class="mt-3">
          <hr />
        </div>
        <div class="m-1 d-flex justify-content-center"></div>
        <div class="m-1">
          <p class="d-flex justify-content-center m-1">
            Copyright© 2023 todos los derechos reservados
          </p>
          <p class="d-flex justify-content-center">Cine Flims ® SAS.</p>
          <hr />
        </div>
      </footer>
    </div>

    <script src="../js/bootstrap.bundle.min.js"></script>

    <script>
      // Mostrar el cartelera de peliculas al cargar la pagina
      cargarPeliculas();
      function cargarPeliculas() {
        var cpeliculas = JSON.parse(localStorage.getItem("peliculag")) || [];
        var chorarios = JSON.parse(localStorage.getItem("horariog")) || [];
        var horapeli = [];
        cpeliculas.forEach(function (cpelis) {
          horapeli = chorarios.filter(function (h) {
            return h.Orden == cpelis.id;
          });

          var cartelera = `
              <div class="card mb-3" style="max-width: 100%;">
                <div class="row g-0">
                  <div class="col-md-4">
                    <img src="${(cpelis["imagen"])?cpelis["imagen"]: ""}" class="img-fluid rounded-start" alt="..."> 
                  </div>

                  <div class="col-md-3">                                     
                    <div class="card-body">
                    <h5 class="card-title" id="nombre">${cpelis["nombre"]}</h5>
                    <p class="card-text" id="sinopsis">${cpelis["sinopsis"]}</p>
                    <h6 class="card-text" id="categoria">${cpelis["categoria"]}</h6>
                    <h6 class="card-text" id="clasificacion">${cpelis["clasificacion"]}</h6>
                    <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="col-2"></div>
                    <div class="col-10">
                       <table class="table table-striped table-hover">
                        <thead class="justify-content-center">
                          <th>Orden</th>
                          <th>Fecha</th>
                          <th>Inicio</th>
                          <th>Fin</th>
                          <th>Tarifa</th>
                        </thead>  
                        <tbody>`;

          horapeli.forEach(function (horario) {
            cartelera += `
                    
                        <tr>                          
                        <td>${horario["Orden"]}</td>
                        <td>${horario["Fecha"]}</td>
                        <td>${horario["HoraInicio"]}</td>
                        <td>${horario["HoraFinal"]}</td>
                        <td>${horario["Tarifa"]}</td>
                        </tr>
                        `;
          });

          cartelera += ` 
              </tbody>
              </div>
                </div>
              </div>
                `;
          document.getElementById("carteleras").innerHTML += cartelera;
        });
      }
    </script>
  </body>
</html>

<!-- <iframe src="https://www.youtube.com/watch?v=-YRw-3dgsjo" class="card-img-top" title="W3Schools Free Online Web Tutorials" width="1280px" height="300px"></iframe> -->
